<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/adminPartials/AdminHeader.ejs') %> 
    <link rel="stylesheet" href="/css/adminProducts.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">
    <section class="body-section">
        <h3 class="i-names">Products</h3>
        <div class="table-top container mb-5">
            <div>
              <a href="/admin/home/coupon/add" class="btn btn-outline-success" role="button" aria-disabled="true">Add</a>
            </div>
        </div>
        <div class="container">
          <div class="table-responsive">
              <table class="table align-middle" id="ptable">
                <thead>
                  <tr>
                      <th scope="col">Coupon</th>
                      <th scope="col">Offer</th>
                      <th scope="col">Max Amount</th>
                      <th scope="col">Coupon Status</th>
                      <th scope="col">Option</th>
                  </tr>
                </thead>
                
                <tbody>
                  <% allData.forEach(data =>{  %>
                  <tr <% if(data.coupon_status === 'deactivated'){ %> 
                    class="table-danger"
                     <% } %> >
                      <td><%= data.coupon_code %></td>
                      <td><%= data.offer %></td>
                      <td><%= data.max_amount %></td>
                      <td><%= data.coupon_status %></td>
                      <td colspan="3">
                        <div class="d-flex flex-column gap-1">
                        <% if(data.coupon_status === 'active') { %> 
                          <a
                          href="/admin/home/coupon/deactivate/<%= data._id %>"
                          class="btn  btn-outline-danger btn-sm"
                          tabindex="-1"
                          role="button"
                          aria-disabled="true"
                          >Deactivate</a>
                              <% } else { %> 
                              <a
                              href="/admin/home/coupon/activate/<%= data._id %>"
                              class="btn btn-outline-success btn-sm"
                              tabindex="-1"
                              role="button"
                              aria-disabled="true"
                              >Activate</a>
                              <% } %> 
                          <a
                              href="/admin/home/coupon/delete/<%= data._id %>"
                              class="btn btn-outline-danger btn-sm"
                              tabindex="-1"
                              role="button"
                              aria-disabled="true"
                              >Delete</a>
                              <a
                              href="/admin/home/coupon/edit/<%= data._id %>"
                              class="btn btn-outline-danger btn-sm"
                              tabindex="-1"
                              role="button"
                              aria-disabled="true"
                              >Edit</a>
                            </div>
                      </td>
                  </tr>
                  <%})%>
                </tbody> 
              </table>
            </div>
      </div>
    </section>
<script>
    $("#menu-btn").click(function () {
      $("#menu").toggleClass("active");
    });

    $(document).ready(function () {
    $('#ptable').DataTable();
    });

    function addsize(id) {
      const size = document.getElementById('size-input'+id).value;
      $.ajax({
          url: '/admin/home/addsize',
          data: {
              size,
              product: id,
          },
          method: 'post',
          success: (res) => {
              // document.getElementById('quantity').innerText = Number(qty) + Number(count);
              location.reload();
              // $('#quantity').load(`${document.URL} #quantity`);
          },
      });
    }
  </script>
  <style>
    #menu .items li:nth-child(2) {
      border-left: 4px solid #fff;
    }
  </style>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"
  ></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
</body>
</html>
</body>
</html>

