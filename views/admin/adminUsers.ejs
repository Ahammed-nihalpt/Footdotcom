<!DOCTYPE html>
<html lang="en">
    <%- include('../partials/adminPartials/AdminHeader.ejs') %> 
    <link rel="stylesheet" href="/css/adminAll.css" type="text/css" />
    <link rel="stylesheet" href="/css/adminProducts.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">
    <section class="body-section">
        <h3 class="i-names">Users</h3>
        <div class="table-top">
            <!-- <div class="search">
                <input class="ser" type="text">
                <button class="ser-btn btn btn-secondary">search</button>
            </div> -->
        </div>
        <div class="container mt-5">
            <div class="table-responsive">
                <table class="table align-middle" id="utable">
                  <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Username</th>
                        <th scope="col">Email</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Status</th>
                        <th scope="col">Options</th>
                    </tr>
                  </thead>
                  <% allData.forEach(data =>{  %>
                  <tbody>
                    <tr <% if(data.user_status == 'blocked'){ %> 
                        class="table-danger" <% } %> 
                        >
                          <td><%= data.name %> </td>
                        <td><%= data.username %></td>
                        <td><%= data.email %></td>
                        <td><%= data.phone %></td>
                        <td><%= data.user_status %></td>
                        <td colspan="3">
                            <!-- <button>edit</button> -->
                            <% if(data.user_status == 'active') { %> 
                            <a
                                href="/admin/home/user/block/<%= data._id %> "
                                class="btn btn-outline-danger btn-sm"
                                tabindex="-1"
                                role="button"
                                aria-disabled="true"
                                >Block</a>
                                <% } else { %> 
                                    <a
                                href="/admin/home/user/unblock/<%= data._id %> "
                                class="btn btn-outline-success btn-sm"
                                tabindex="-1"
                                role="button"
                                aria-disabled="true"
                                >Unblock</a>
                            <% } %> 
                            <a
                                href="/admin/home/user/delete/<%= data._id %>"
                                class="btn btn-outline-danger btn-sm"
                                tabindex="-1"
                                role="button"
                                aria-disabled="true"
                                >Delete</a>
                        </td>
                    </tr>
                  </tbody>
                  <%})%>
                </table>
              </div>
        </div>
    </section>
<script>
    $("#menu-btn").click(function () {
      $("#menu").toggleClass("active");
    });

    $(document).ready(function () {
      $('#utable').DataTable();
    });
  </script>
  <style>
    #menu .items li:nth-child(4) {
      border-left: 4px solid #fff;
    }
  </style>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"
  ></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
</body>
</html>
</body>
</html>

