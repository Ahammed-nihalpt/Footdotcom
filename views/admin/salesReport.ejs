<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/adminPartials/AdminHeader.ejs') %>
  <link rel="stylesheet" href="/css/adminProducts.css" type="text/css" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css"
  />
  <section class="body-section">
    <h3 class="i-names">Sales Report</h3>
    <div class="table-top container mb-5 mt-4 d-flex justify-content-center">
      <div>
        <h4>Today</h4>
      </div>
    </div>
    <div class="container">
      <div class="table-responsive">
        <table class="table table-bordered align-middle" id="today-table">
          <thead>
            <tr class="text-center">
              <th scope="col">Order Id</th>
              <th scope="col">Customer</th>
              <th scope="col">Amount</th>
              <th scope="col">Status</th>
              <th scope="col">Order Status</th>
            </tr>
          </thead>
          <tbody class="text-center">
            <% today.forEach(element => { %>
            <tr>
              <td><%= element.order_id %></td>
              <td><%= element.user[0].name %></td>
              <td><%= element.totalAmount %></td>
              <td><%= element.paymentStatus %></td>
              <td><%= element.orderStatus %></td>
            </tr>
            <% }) %>
          </tbody>
        </table>
        <div class="d-flex justify-content-center">
          <button class="btn btn-danger" id="today-btn">Download As PDF</button>
        </div>
      </div>
    </div>

    <div
      class="table-top container mb-5 mt-4 d-flex justify-content-center mt-5"
    >
      <div>
        <h4>This Month</h4>
      </div>
    </div>
    <div class="container">
      <div class="table-responsive">
        <table class="table table-bordered align-middle" id="month-table">
          <thead>
            <tr class="text-center">
              <th scope="col">Order Id</th>
              <th scope="col">Customer</th>
              <th scope="col">Amount</th>
              <th scope="col">Status</th>
              <th scope="col">Order Status</th>
            </tr>
          </thead>
          <tbody class="text-center">
            <% month.forEach(element => { %>
            <tr>
              <td><%= element.order_id %></td>
              <td><%= element.user[0].name %></td>
              <td><%= element.totalAmount %></td>
              <td><%= element.paymentStatus %></td>
              <td><%= element.orderStatus %></td>
            </tr>
            <% }) %>
          </tbody>
        </table>
        <div class="d-flex justify-content-center">
          <button class="btn btn-danger" id="today-btn">Download As PDF</button>
        </div>
      </div>
    </div>

    <div
      class="table-top container mb-5 mt-4 d-flex flex-column align-items-center mt-5"
    >
      <div>
        <h4>Custom Date</h4>
      </div>
      <form action="/admin/salesreport/customdate" method="post">
        <div class="d-flex justify-content-center align-items-center">
          <input type="date" class="form-control" name="startDate" id="start" />
          <h5 class="text-center ms-3 me-3">to</h5>
          <input
            type="date"
            class="form-control"
            min=""
            name="endDate"
            id="end"
          />
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn btn-success mt-2">Submit</button>
        </div>
      </form>
    </div>
    <div class="container">
      <div class="table-responsive">
        <table class="table table-bordered align-middle" id="month-table">
          <thead class="text-center">
            <tr class="text-center">
              <th scope="col">Order Id</th>
              <th scope="col">Customer</th>
              <th scope="col">Amount</th>
              <th scope="col">Status</th>
              <th scope="col">Order Status</th>
            </tr>
          </thead>
          <tbody class="text-center">
            <% month.forEach(element => { %>
            <tr>
              <td><%= element.order_id %></td>
              <td><%= element.user[0].name %></td>
              <td><%= element.totalAmount %></td>
              <td><%= element.paymentStatus %></td>
              <td><%= element.orderStatus %></td>
            </tr>
            <% }) %>
          </tbody>
        </table>
        <div class="d-flex justify-content-center">
          <button class="btn btn-danger" id="today-btn">Download As PDF</button>
        </div>
      </div>
    </div>
  </section>
  <script>
    start.max = new Date().toISOString().split("T")[0];
    end.max = new Date().toISOString().split("T")[0];
    $("#menu-btn").click(function () {
      $("#menu").toggleClass("active");
    });

    $(document).ready(function () {
      $("#today-table").DataTable();
    });
    $(document).ready(function () {
      $("#month-table").DataTable();
    });
  </script>
  <style>
    #menu .items li:nth-child(6) {
      border-left: 4px solid #fff;
    }
    .bgb {
      background-color: #003049;
      color: #fff;
    }
  </style>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"
  ></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
</html>
